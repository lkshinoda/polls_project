codetasty.revision.2.0
{"ts":1594288532,"restoring":false,"user_id":37673,"patch":[{"diffs":[[1,"from polls.forms import CreateTestForm, CreateQuestionForm, CreatePollForm\nfrom polls.models import Question, Poll, Test\nfrom django.views.generic import ListView, DetailView, DeleteView, CreateView, UpdateView, View\nfrom django.shortcuts import get_object_or_404, render\nfrom django.http import JsonResponse\n\n\nclass IndexPageView(ListView):\n    model = Poll\n    template_name = 'polls/index.html'\n\n\n\"\"\" Test \"\"\"\n\n\nclass TestListView(ListView):\n    title = 'Список тестов'\n    model = Test\n    template_name = 'polls/test_list.html'\n\n\nclass TestDetailView(DetailView):\n    model = Test\n    template_name = 'polls/detail_test.html'\n\n\nclass TestCreateView(CreateView):\n    form_class = CreateTestForm\n    template_name = 'polls/create_test.html'\n\n\nclass TestUpdateView(UpdateView):\n    model = Test\n    form_class = CreateTestForm\n    template_name = 'polls/update_test.html'\n\n\nclass TestDeleteView(DeleteView):\n    model = Test\n    template_name = 'polls/delete_test.html'\n    success_url = '/'\n\n\n\"\"\" Question \"\"\"\n\n\nclass QuestionListView(ListView):\n    model = Question\n    template_name = 'polls/question_list.html'\n\n\nclass QuestionCreateView(CreateView):\n    form_class = CreateQuestionForm\n    template_name = 'polls/create_question.html'\n\n\nclass QuestionDetailView(DetailView):\n    model = Question\n    template_name = 'polls/detail_question.html'\n\n\nclass QuestionUpdateView(UpdateView):\n    model = Question\n    form_class = CreateQuestionForm\n    template_name = 'polls/update_question.html'\n\n\nclass QuestionDeleteView(DeleteView):\n    model = Question\n    template_name = 'polls/delete_question.html'\n    success_url = '/question/'\n\n\n\"\"\" Poll \"\"\"\n\n\nclass PollCreateView(CreateView):\n    form_class = CreatePollForm\n    template_name = 'polls/create_poll.html'\n\n\nclass PollListView(ListView):\n    model = Poll\n    template_name = 'polls/poll_list.html'\n\n\nclass PollDetailView(DetailView):\n    model = Poll\n    template_name = 'polls/detail_poll.html'\n\n\nclass PollUpdateView(UpdateView):\n    model = Poll\n    form_class = CreatePollForm\n    template_name = 'polls/update_poll.html'\n\n\nclass PollDeleteView(DeleteView):\n    model = Poll\n    template_name = 'polls/delete_poll.html'\n    success_url = '/poll/'\n\n\nclass RunTestView(DetailView):\n    model = Test\n    template_name = 'polls/run_test.html'\n\n\ndef create_poll(request):\n    polls = Poll.objects.all()\n    response_data = {}\n    context = {'polls': polls}\n\n    if request.POST.get('action') == 'add':\n        title = request.POST.get('title')\n        description = request.POST.get('description')\n\n        response_data['title'] = title\n        response_data['description'] = description\n\n        Poll.objects.create(\n            title=title,\n            description=description\n        )\n        return JsonResponse(response_data)\n\n    return render(request, 'polls/create_poll.html', context)\n    \n\n\n\n\ndef create_question(request):\n    questions = Question.objects.all()\n    response_data = {}\n    context = {'questions': questions}\n\n    if request.POST.get('action') == 'post':\n        question_text = request.POST.get('question_text')\n        true_answer = request.POST.get('true_answer')\n        option_a = request.POST.get('option_a')\n        option_b = request.POST.get('option_b')\n        option_c = request.POST.get('option_c')\n\n        response_data['question_text'] = question_text\n        response_data['true_answer'] = true_answer\n        response_data['option_a'] = option_a\n        response_data['option_b'] = option_b\n        response_data['option_c'] = option_c\n\n        Question.objects.create(\n            question_text=question_text,\n            true_answer=true_answer,\n            option_a=option_a,\n            option_b=option_b,\n            option_c=option_c\n        )\n        return JsonResponse(response_data)\n\n    return render(request, 'polls/test.html', context)\n"]],"start1":0,"start2":0,"length1":0,"length2":3853}],"length":3853}
{"ts":1594288545,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,")\n    \n\n"],[1,"def create_poll(request):\n    polls = Poll.objects.all()\n    response_data = {}\n    context = {'polls': polls}\n\n    if request.POST.get('action') == 'add':\n        title = request.POST.get('title')\n        description = request.POST.get('description')\n\n        response_data['title'] = title\n        response_data['description'] = description\n\n        Poll.objects.create(\n            title=title,\n            description=description\n        )\n        return JsonResponse(response_data)\n\n    return render(request, 'polls/create_poll.html', context)"],[0,"\n\n\ndef c"]],"start1":2854,"start2":2854,"length1":16,"length2":565}],"length":4402}
{"ts":1594288548,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"   \n\ndef create_"],[-1,"poll"],[1,"test"],[0,"(request):\n    p"]],"start1":2857,"start2":2857,"length1":36,"length2":36}],"length":4402}
{"ts":1594288555,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"t):\n    polls = "],[-1,"Poll"],[1,"Test"],[0,".objects.all()\n "]],"start1":2884,"start2":2884,"length1":36,"length2":36}],"length":4402}
{"ts":1594288561,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    context = {'"],[-1,"poll"],[1,"test"],[0,"s': polls}\n\n    "]],"start1":2942,"start2":2942,"length1":36,"length2":36}],"length":4402}
{"ts":1594288567,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"= {'tests': "],[-1,"poll"],[1,"test"],[0,"s}\n\n    if r"]],"start1":2954,"start2":2954,"length1":28,"length2":28}],"length":4402}
{"ts":1594288570,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"quest):\n    "],[-1,"poll"],[1,"test"],[0,"s = Test.obj"]],"start1":2880,"start2":2880,"length1":28,"length2":28}],"length":4402}
{"ts":1594288591,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,", 'polls/create_"],[-1,"poll"],[1,"test"],[0,".html', context)"]],"start1":3375,"start2":3375,"length1":36,"length2":36}],"length":4402}
{"ts":1594288614,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"== '"],[-1,"post"],[1,"add"],[0,"':\n "]],"start1":3580,"start2":3580,"length1":12,"length2":11}],"length":4401}
{"ts":1594288643,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"  \n\n"],[-1,"def create_test(request):\n    tests = Test.objects.all()\n    response_data = {}\n    context = {'tests': tests}\n\n    if request.POST.get('action') == 'add':\n        title = request.POST.get('title')\n        description = request.POST.get('description')\n\n        response_data['title'] = title\n        response_data['description'] = description\n\n        Poll.objects.create(\n            title=title,\n            description=description\n        )\n        return JsonResponse(response_data)\n\n    return render(request, 'polls/create_test.html', context)\n"],[0,"\n\nde"]],"start1":2858,"start2":2858,"length1":558,"length2":8}],"length":3851}
{"ts":1594288644,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"\n    \n\n\n"],[-1,"\n"],[0,"def crea"]],"start1":2855,"start2":2855,"length1":17,"length2":16}],"length":3850}
{"ts":1594288846,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"'\n\n\ndef "],[-1,"create_"],[0,"poll(req"]],"start1":2302,"start2":2302,"length1":23,"length2":16}],"length":3843}
{"ts":1594288848,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"'\n\n\ndef "],[1,"list_"],[0,"poll(req"]],"start1":2302,"start2":2302,"length1":16,"length2":21}],"length":3848}
{"ts":1594288856,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"'\n\n\ndef "],[-1,"list"],[1,"view"],[0,"_poll(re"]],"start1":2302,"start2":2302,"length1":20,"length2":20}],"length":3848}
{"ts":1594288988,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"request, 'polls/"],[-1,"create_"],[0,"poll.html', cont"]],"start1":2810,"start2":2810,"length1":39,"length2":32}],"length":3841}
{"ts":1594288990,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," 'polls/poll"],[1,"_list"],[0,".html', cont"]],"start1":2818,"start2":2818,"length1":24,"length2":29}],"length":3846}
{"ts":1594292587,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," 'polls/"],[1,"crea"],[0,"te"],[-1,"st"],[0,".html', "]],"start1":3817,"start2":3817,"length1":20,"length2":22}],"length":3848}
{"ts":1594292589,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"s/create"],[1,"_question"],[0,".html', "]],"start1":3823,"start2":3823,"length1":16,"length2":25}],"length":3857}
{"ts":1594293330,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"\"\n\n\n"],[-1,"class PollCreateView(CreateView):\n    form_class = CreatePollForm\n    template_name = 'polls/create_poll.html'\n\n\n"],[0,"clas"]],"start1":1652,"start2":1652,"length1":121,"length2":8}],"length":3744}
{"ts":1594293334,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"\"\n\n\n"],[-1,"class PollListView(ListView):\n    model = Poll\n    template_name = 'polls/poll_list.html'\n\n\n"],[0,"clas"]],"start1":1652,"start2":1652,"length1":100,"length2":8}],"length":3652}
{"ts":1594293349,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"n(request):\n"],[1,"    \n"],[0,"    question"]],"start1":2672,"start2":2672,"length1":24,"length2":29}],"length":3657}
{"ts":1594293357,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"quest):\n"],[-1,"    \n"],[0,"    ques"]],"start1":2676,"start2":2676,"length1":21,"length2":16}],"length":3652}
{"ts":1594293363,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"l(request):\n"],[1,"    tests = Test.o\n"],[0,"    polls = "]],"start1":2113,"start2":2113,"length1":24,"length2":43}],"length":3671}
{"ts":1594293364,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"= Test.o"],[1,"b"],[0,"\n    pol"]],"start1":2135,"start2":2135,"length1":16,"length2":17}],"length":3672}
{"ts":1594293371,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," Test.ob"],[1,"jects.all"],[0,"\n    pol"]],"start1":2136,"start2":2136,"length1":16,"length2":25}],"length":3681}
{"ts":1594293372,"restoring":false,"patch":[{"diffs":[[0,"ects.all"],[1,"()"],[0,"\n    pol"]],"start1":2145,"start2":2145,"length1":16,"length2":18}],"length":3683}
{"ts":1594293377,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"': polls"],[1,", test"],[0,"}\n\n    i"]],"start1":2231,"start2":2231,"length1":16,"length2":22}],"length":3689}
{"ts":1594293378,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ls, test"],[1,"s"],[0,"}\n\n    i"]],"start1":2237,"start2":2237,"length1":16,"length2":17}],"length":3690}
{"ts":1594293381,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," polls, "],[1,"'"],[0,"tests}\n\n"]],"start1":2233,"start2":2233,"length1":16,"length2":17}],"length":3691}
{"ts":1594293382,"restoring":false,"patch":[{"diffs":[[0,", 'tests"],[1,"'"],[0,"}\n\n    i"]],"start1":2239,"start2":2239,"length1":16,"length2":17}],"length":3692}
{"ts":1594293383,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," 'tests'"],[1,": "],[0,"}\n\n    i"]],"start1":2240,"start2":2240,"length1":16,"length2":18}],"length":3694}
{"ts":1594293386,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"tests': "],[1,"tests"],[0,"}\n\n    i"]],"start1":2242,"start2":2242,"length1":16,"length2":21}],"length":3699}
{"ts":1594295665,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"e\n\n\n"],[-1,"class IndexPageView(ListView):\n    model = Poll\n    template_name = 'polls/index.html'\n\n"],[0,"\n\"\"\""]],"start1":307,"start2":307,"length1":96,"length2":8}],"length":3611}
{"ts":1594295679,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"def "],[-1,"view_poll"],[0,"(req"]],"start1":2013,"start2":2013,"length1":17,"length2":8}],"length":3602}
{"ts":1594295679,"restoring":false,"patch":[{"diffs":[[0,"'\n\n\ndef "],[1,"index"],[0,"(request"]],"start1":2009,"start2":2009,"length1":16,"length2":21}],"length":3607}
{"ts":1594295682,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ef index"],[1,"_page"],[0,"(request"]],"start1":2014,"start2":2014,"length1":16,"length2":21}],"length":3612}
{"ts":1594295690,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"def "],[-1,"index_page"],[1,"view_poll"],[0,"(req"]],"start1":2013,"start2":2013,"length1":18,"length2":17}],"length":3611}
{"ts":1594296022,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"lls/"],[-1,"poll_list"],[1,"index"],[0,".htm"]],"start1":2576,"start2":2576,"length1":17,"length2":13}],"length":3607}