codetasty.revision.2.0
{"ts":1594289509,"restoring":false,"user_id":37673,"patch":[{"diffs":[[1,"{% extends \"base.html\" %}\n\n{% block title %}\n    Главная\n{% endblock %}\n\n{% block nav_bar_menu %}\n\n\n    <li class=\"nav-item\">\n        <a class=\"nav-link \" href=\" {% url '_poll' %} \"  role=\"button\" >\n            Опросы\n        </a>\n    </li>\n\n\n    <li class=\"nav-item\">\n        <a class=\"nav-link \" href=\" {% url 'test_list' %} \"  role=\"button\" >\n            Тесты\n        </a>\n    </li>\n\n\n    <li class=\"nav-item\">\n        <a class=\"nav-link \" href=\" {% url 'list_question' %} \"  role=\"button\" >\n            Вопросы\n        </a>\n    </li>\n\n{% endblock %}\n\n{% block body %}\n\n    {% for object in object_list %}\n        <p><a href=\"{% url 'detail_poll' slug=object.slug %}\">{{ object.title }}</a></p>\n    {% endfor %}\n\n\n{% endblock %}"]],"start1":0,"start2":0,"length1":0,"length2":732}],"length":732}
{"ts":1594289511,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"{% url '"],[1,"view"],[0,"_poll' %"]],"start1":162,"start2":162,"length1":16,"length2":20}],"length":736}
{"ts":1594293948,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ock "],[-1,"body"],[1,"content"],[0," %}\n"]],"start1":565,"start2":565,"length1":12,"length2":15}],"length":739}
{"ts":1594295607,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"{% endblock %}\n\n"],[1,"    "],[0,"{% block content"]],"start1":544,"start2":544,"length1":32,"length2":36},{"diffs":[[0," %}\n"],[-1,"\n"],[1,"    "],[0,"    {% "],[-1,"for object in object_list %}\n        <p><a href=\"{% url 'detail_poll' slug=object.slug %}\">{{ object.title }}</a>"],[1,"block format_content %}\n            \n\n            \n            <div class=\"container pt-5\">\n                \n                <div class='mt-4'>\n                    <div class=\"row mb-2 polls\">\n                        {% for poll in polls %}\n                            <div class=\"col-md-6\">\n                                <div class=\"shadow p-3 mb-5 bg-white rounded\">\n                                    <div class=\"col p-3 d-flex flex-column position-static\">\n                                        <h3 class=\"mb-0\">{{ poll.title }}</h3>\n                                        <p class=\"mb-auto\">{{ poll.description }}</p>\n                                        <a href=\"{% url 'detail_poll' slug=poll.slug %}\" class=\"stretched-link\"></a>\n                                    </div>\n                                </div>\n                            </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                \n\n                <button type=\"button\" class=\"btn btn-outline-primary\">Добавить опрос</button>\n\n                    <div id=\"show_form\" style=\"display:none\" class='mt-4 ml-2'>\n                        <div class=\"d-inline-flex bd-highlight\">\n                                \n                            <form method=\"POST\" id=\"poll-form\">{% csrf_token %}\n                                <div class=\"form-group\">\n                                    <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Название опроса\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\" id=\"description\" placeholder=\"Описание\"></textarea>\n                                </div>\n                                Добавить тесты к опросу\n                                <div>\n                                    <select class=\"custom-select\" multiple>\n                                        {% for test in tests %}\n                                        <option value=\"{{ test.id }}\">{{ test.title }}</option>\n                                        {% endfor %}\n                                    </select>\n                                </div>\n                                <br>\n                                <button type=\"submit\" class=\"btn btn-primary\">Создать</button>\n                                \n                            </form>\n                                \n                        </div>\n                    </div>\n\n                \n            </div>\n            \n        {% endblock %}\n    {% endblock %}\n\n</body>\n\n{% block scripts %}\n    <script src=\"/static/js/jquery-2.2.4.min.js\"></script>\n    <script src=\"/static/js/bootstrap.min.js\"></script>\n    \n    <script>\n        $(document).on('submit', '#poll-form', function(e) {\n            e.preventDefault();\n            $.ajax({\n                type: 'POST',\n                url: '{% url \"view_poll\" %}',\n                data: {\n                    title: $('#title').val(),\n                    description: $('#description').val(),\n                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),\n                    action: 'add'\n                },\n                success: function(json) {\n                    document.getElementById(\"poll-form\").reset();\n                    $(\".polls\").prepend('<div class=\"col-md-6\">' +\n                        '<div class=\"row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative\">' +\n                        '<div class=\"col p-4 d-flex flex-column position-static\">' +\n                        '<h3 class=\"mb-0\">' + json.title + '</h3>' +\n                        '<p class=\"mb-auto\">' + json.description + '"],[0,"</p>"],[1,"' +"],[0,"\n    "],[-1,"{% endfor %}\n\n"],[1,"                    '</div>' +\n                        '</div>' +\n                        '</div>'\n                    )\n                },\n                error: function(xhr, errmsg, err) {\n                    $('#results').html(\"<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: \" + errmsg +\n                        \" <a href='#' class='close'>&times;</a></div>\"); // add the error to the dom\n                    console.log(xhr.status + \": \" + xhr.responseText); // provide a bit more info about the error to the console\n                }\n            });\n        });\n    </script>\n    \n    <script>\n        $(\"button\").click(function() {\n        $(\"#show_form\").toggle(500);\n        });\n    </script>\n    "],[0,"\n{% "]],"start1":580,"start2":580,"length1":152,"length2":4533}],"length":5124}
{"ts":1594295611,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"%}\n\n"],[-1,"</body>\n"],[0,"\n{% "]],"start1":3194,"start2":3194,"length1":16,"length2":8}],"length":5116}
{"ts":1594295848,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"{% url \""],[-1,"view_poll"],[1,"home"],[0,"\" %}',\n "]],"start1":3518,"start2":3518,"length1":25,"length2":20}],"length":5111}
{"ts":1594295860,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"rl '"],[-1,"view_poll"],[1,"Home"],[0,"' %}"]],"start1":166,"start2":166,"length1":17,"length2":12}],"length":5106}
{"ts":1594295868,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"}\n\n\n"],[-1,"    <li class=\"nav-item\">\n        <a class=\"nav-link \" href=\" {% url 'Home' %} \"  role=\"button\" >\n            Опросы\n        </a>\n    </li>\n\n\n"],[0,"    "]],"start1":96,"start2":96,"length1":150,"length2":8}],"length":4964}
{"ts":1594295871,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"сты\n        </a>"],[1,"view_poll"],[0,"\n    </li>\n\n\n   "]],"start1":217,"start2":217,"length1":32,"length2":41}],"length":4973}
{"ts":1594295873,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ew_poll\n"],[1,"        \n"],[0,"    </li"]],"start1":235,"start2":235,"length1":16,"length2":25}],"length":4982}
{"ts":1594295875,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"</a>"],[-1,"view_poll\n        "],[0,"\n   "]],"start1":229,"start2":229,"length1":26,"length2":8}],"length":4964}