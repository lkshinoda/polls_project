codetasty.revision.2.0
{"ts":1594288817,"restoring":false,"user_id":37673,"patch":[{"diffs":[[1,"{% extends \"base.html\" %}\n\n\n\n{% block title %}\n    Опросы\n{% endblock %}\n\n\n\n<body>\n    \n    {% block content %}\n        {% block format_content %}\n            \n\n            \n            <div class=\"container pt-5\">\n                \n                <div class='mt-4'>\n                    <div class=\"row mb-2 polls\">\n                        {% for poll in polls %}\n                            <div class=\"col-md-6\">\n                                <div class=\"shadow p-3 mb-5 bg-white rounded\">\n                                    <div class=\"col p-3 d-flex flex-column position-static\">\n                                        <h3 class=\"mb-0\">{{ poll.title }}</h3>\n                                        <p class=\"mb-auto\">{{ poll.description }}</p>\n                                        <a href=\"{% url 'detail_poll' slug=poll.slug %}\" class=\"stretched-link\"></a>\n                                    </div>\n                                </div>\n                            </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                \n                \n                <button type=\"button\" class=\"btn btn-outline-primary\">Добавить опрос</button>\n                \n                    <div id=\"show_form\" style=\"display:none\" class='mt-4 ml-2'>\n                        <div class=\"d-inline-flex bd-highlight\">\n                                \n                            <form method=\"POST\" id=\"poll-form\">{% csrf_token %}\n                                <div class=\"form-group\">\n                                    <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Название опроса\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\" id=\"description\" placeholder=\"Описание\"></textarea>\n                                </div>\n                                <button type=\"submit\" class=\"btn btn-primary\">Создать</button>\n                            </form>\n                                \n                        </div>\n                    </div>\n\n                \n            </div>\n            \n        {% endblock %}\n    {% endblock %}\n\n</body>\n\n{% block scripts %}\n    <script src=\"/static/js/jquery-2.2.4.min.js\"></script>\n    <script src=\"/static/js/bootstrap.min.js\"></script>\n    \n    <script>\n        $(document).on('submit', '#poll-form', function(e) {\n            e.preventDefault();\n            $.ajax({\n                type: 'POST',\n                url: '{% url \"create_poll\" %}',\n                data: {\n                    title: $('#title').val(),\n                    description: $('#description').val(),\n                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),\n                    action: 'add'\n                },\n                success: function(json) {\n                    document.getElementById(\"poll-form\").reset();\n                    $(\".polls\").prepend('<div class=\"col-md-6\">' +\n                        '<div class=\"row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative\">' +\n                        '<div class=\"col p-4 d-flex flex-column position-static\">' +\n                        '<h3 class=\"mb-0\">' + json.title + '</h3>' +\n                        '<p class=\"mb-auto\">' + json.description + '</p>' +\n                        '</div>' +\n                        '</div>' +\n                        '</div>'\n                    )\n                },\n                error: function(xhr, errmsg, err) {\n                    $('#results').html(\"<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: \" + errmsg +\n                        \" <a href='#' class='close'>&times;</a></div>\"); // add the error to the dom\n                    console.log(xhr.status + \": \" + xhr.responseText); // provide a bit more info about the error to the console\n                }\n            });\n        });\n    </script>\n    \n    <script>\n        $(\"button\").click(function() {\n        $(\"#show_form\").toggle(500);\n        });\n    </script>\n    \n{% endblock %}"]],"start1":0,"start2":0,"length1":0,"length2":4148}],"length":4148}
{"ts":1594288883,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"rl \""],[-1,"create_poll"],[0,"\" %}"]],"start1":2552,"start2":2552,"length1":19,"length2":8}],"length":4137}
{"ts":1594288889,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"{% url \""],[1,"view_"],[0,"\" %}',\n "]],"start1":2548,"start2":2548,"length1":16,"length2":21}],"length":4142}
{"ts":1594288892,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"l \"view_"],[1,"poll"],[0,"\" %}',\n "]],"start1":2553,"start2":2553,"length1":16,"length2":20}],"length":4146}
{"ts":1594294360,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"               \n"],[1,"                            <div>\n                {% for test in tests %}\n                    <div class=\"form-check\">\n                      <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\">\n                      <label class=\"form-check-label\" for=\"defaultCheck1\">\n                        {{ test.title }}\n                      </label>\n                    </div>\n                {% endfor %}\n            </div>\n"],[0,"                "]],"start1":1074,"start2":1074,"length1":32,"length2":472}],"length":4586}
{"ts":1594294367,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"       \n"],[-1,"                "],[0,"        "]],"start1":1082,"start2":1082,"length1":32,"length2":16}],"length":4570}
{"ts":1594294370,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    "],[1,"    "],[0,"<div>\n"],[1,"    "],[0,"    "]],"start1":1098,"start2":1098,"length1":14,"length2":22},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"<div class=\"form"]],"start1":1160,"start2":1160,"length1":32,"length2":36},{"diffs":[[0,"check\">\n"],[1,"    "],[0,"        "]],"start1":1197,"start2":1197,"length1":16,"length2":20},{"diffs":[[0,"defaultCheck1\">\n"],[1,"    "],[0,"                "]],"start1":1292,"start2":1292,"length1":32,"length2":36},{"diffs":[[0,"        "],[1,"    "],[0,"{{ test."]],"start1":1403,"start2":1403,"length1":16,"length2":20},{"diffs":[[0,"        "],[1,"    "],[0,"</label>"]],"start1":1446,"start2":1446,"length1":16,"length2":20},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"</div>\n"],[1,"    "],[0,"                "]],"start1":1471,"start2":1471,"length1":39,"length2":47},{"diffs":[[0,"   {% endfor %}\n"],[1,"    "],[0,"            </di"]],"start1":1515,"start2":1515,"length1":32,"length2":36}],"length":4610}
{"ts":1594294384,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"   \n"],[-1,"                <div>\n                    {% for test in tests %}\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\">\n                          <label class=\"form-check-label\" for=\"defaultCheck1\">\n                            {{ test.title }}\n                          </label>\n                        </div>\n                    {% endfor %}\n                </div>"],[0,"\n   "]],"start1":1086,"start2":1086,"length1":471,"length2":8}],"length":4147}
{"ts":1594294386,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"      \n\n"],[-1,"                \n"],[0,"        "]],"start1":1083,"start2":1083,"length1":33,"length2":16}],"length":4130}
{"ts":1594294392,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"         </div>\n"],[1,"                                \n                                \n"],[0,"                "]],"start1":1873,"start2":1873,"length1":32,"length2":98}],"length":4196}
{"ts":1594294393,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"               \n"],[1,"                                                <div>\n                    {% for test in tests %}\n                        <div class=\"form-check\">\n                          <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\">\n                          <label class=\"form-check-label\" for=\"defaultCheck1\">\n                            {{ test.title }}\n                          </label>\n                        </div>\n                    {% endfor %}\n                </div>\n"],[0,"                "]],"start1":1906,"start2":1906,"length1":32,"length2":528}],"length":4692}
{"ts":1594294399,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[1,"                "],[0,"{% for test "]],"start1":1984,"start2":1984,"length1":24,"length2":40},{"diffs":[[0,"                "],[1,"  "],[1,"              "],[0,"<div class=\"form"]],"start1":2044,"start2":2044,"length1":32,"length2":48},{"diffs":[[0,"            "],[1,"    "],[1,"            "],[0,"<input class"]],"start1":2115,"start2":2115,"length1":24,"length2":40},{"diffs":[[0,"        "],[1,"                "],[0,"<label c"]],"start1":2238,"start2":2238,"length1":16,"length2":32},{"diffs":[[0,"        "],[1,"        "],[1,"        "],[0,"{{ test."]],"start1":2335,"start2":2335,"length1":16,"length2":32},{"diffs":[[0,"        "],[1,"          "],[1,"      "],[0,"</label>"]],"start1":2394,"start2":2394,"length1":16,"length2":32},{"diffs":[[0,"                "],[1,"            "],[1,"    "],[0,"</div>\n         "]],"start1":2435,"start2":2435,"length1":32,"length2":48},{"diffs":[[0,"                "],[1,"              "],[1,"  "],[0,"{% endfor %}\n   "]],"start1":2478,"start2":2478,"length1":32,"length2":48},{"diffs":[[0,"   {% endfor %}\n"],[1,"                "],[0,"                "]],"start1":2507,"start2":2507,"length1":32,"length2":48}],"length":4836}
{"ts":1594294402,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[-1,"            "],[0,"<div>\n      "]],"start1":1946,"start2":1946,"length1":36,"length2":24}],"length":4824}
{"ts":1594294406,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[-1,"    "],[0,"<div>\n      "]],"start1":1942,"start2":1942,"length1":28,"length2":24}],"length":4820}
{"ts":1594294440,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"// "],[0,"\n               "]],"start1":1185,"start2":1185,"length1":32,"length2":35}],"length":4823}
{"ts":1594294447,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"     // "],[1,"выровнять форму добавления "],[0,"\n       "]],"start1":1196,"start2":1196,"length1":16,"length2":43}],"length":4850}
{"ts":1594294449,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"авления "],[1,"опроса"],[0,"\n       "]],"start1":1223,"start2":1223,"length1":16,"length2":22}],"length":4856}
{"ts":1594294552,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"      <div>\n"],[1,"                                    \n                                    \n                                    \n                                    \n"],[0,"            "]],"start1":1984,"start2":1984,"length1":24,"length2":172}],"length":5004}
{"ts":1594294553,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"<select class=\"custom-select\" multiple>\n  <option selected>Open this select menu</option>\n  <option value=\"1\">One</option>\n  <option value=\"2\">Two</option>\n  <option value=\"3\">Three</option>\n</select>"],[0,"\n               "]],"start1":2053,"start2":2053,"length1":32,"length2":232}],"length":5204}
{"ts":1594294559,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ltiple>\n"],[1,"                                    "],[0,"  <optio"]],"start1":2101,"start2":2101,"length1":16,"length2":52},{"diffs":[[0,">\n  "],[-1,"<option value=\"1\">One</option>\n  <option value=\"2\">Two</option>\n  <option value=\"3\">Three</option>\n"],[1,"                                    <option value=\"1\">One</option>\n                                      <option value=\"2\">Two</option>\n                                      <option value=\"3\">Three</option>\n                                    "],[0,"</se"]],"start1":2193,"start2":2193,"length1":107,"length2":251}],"length":5384}
{"ts":1594294568,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    "],[-1,"{% for test in tests %}"],[0,"\n   "]],"start1":2556,"start2":2556,"length1":31,"length2":8}],"length":5361}
{"ts":1594294584,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ltiple>\n"],[1,"                                        {% for test in tests %}\n"],[0,"        "]],"start1":2101,"start2":2101,"length1":16,"length2":80}],"length":5425}
{"ts":1594294588,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[-1,"    "],[0,"{% for test "]],"start1":2133,"start2":2133,"length1":28,"length2":24}],"length":5421}
{"ts":1594294591,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[1,"    "],[0,"{% for test "]],"start1":2133,"start2":2133,"length1":24,"length2":28}],"length":5425}
{"ts":1594294597,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[-1,"    "],[0,"<option selected"]],"start1":2191,"start2":2191,"length1":36,"length2":32},{"diffs":[[0,"t menu</option>\n"],[-1,"    "],[0,"                "]],"start1":2239,"start2":2239,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"<option value=\"2"]],"start1":2338,"start2":2338,"length1":36,"length2":32},{"diffs":[[0,"2\">Two</option>\n"],[-1,"    "],[0,"                "]],"start1":2369,"start2":2369,"length1":36,"length2":32}],"length":5409}
{"ts":1594294600,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    "],[-1,"<option selected>Open this select menu</option>\n                                  <option value=\"1\">One</option>\n                                  <option value=\"2\">Two</option>\n                                  <option value=\"3\">Three</option>"],[1," "],[0,"\n   "]],"start1":2203,"start2":2203,"length1":252,"length2":9}],"length":5166}
{"ts":1594294603,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"   <option selected>Open this select menu</option>\n                                      <option value=\"1\">One</option>\n                                      <option value=\"2\">Two</option>\n                                      <option value=\"3\">Three</option>"],[0,"\n               "]],"start1":2192,"start2":2192,"length1":32,"length2":291}],"length":5425}
{"ts":1594294605,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[-1," "],[0,"<option selected"]],"start1":2194,"start2":2194,"length1":33,"length2":32}],"length":5424}
{"ts":1594294607,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"   "],[0,"<option selected"]],"start1":2194,"start2":2194,"length1":32,"length2":35}],"length":5427}
{"ts":1594294611,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"  "],[0,"<option value=\"1"]],"start1":2283,"start2":2283,"length1":32,"length2":34}],"length":5429}
{"ts":1594294613,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"  "],[0,"<option value=\"2"]],"start1":2354,"start2":2354,"length1":32,"length2":34}],"length":5431}
{"ts":1594294616,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"  "],[0,"<option value=\"3"]],"start1":2425,"start2":2425,"length1":32,"length2":34}],"length":5433}
{"ts":1594294621,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,">Three</option>\n"],[1,"                                        \n"],[0,"                "]],"start1":2460,"start2":2460,"length1":32,"length2":73}],"length":5474}
{"ts":1594294625,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"            "],[-1,"{% endfor %}"],[0,"\n           "]],"start1":3136,"start2":3136,"length1":36,"length2":24}],"length":5462}
{"ts":1594294626,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"{% endfor %}"],[0,"\n               "]],"start1":2500,"start2":2500,"length1":32,"length2":44}],"length":5474}
{"ts":1594294672,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," %}\n"],[-1,"                                        <option selected>Open this select menu</option>\n"],[0,"    "]],"start1":2169,"start2":2169,"length1":96,"length2":8}],"length":5386}
{"ts":1594294678,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    "],[-1,"{{ test.title }}"],[0,"\n   "]],"start1":2917,"start2":2917,"length1":24,"length2":8}],"length":5370}
{"ts":1594294684,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"on>\n"],[-1,"                                        <option value=\"2\">Two</option>\n                                        <option value=\"3\">Three</option>\n"],[0,"    "]],"start1":2240,"start2":2240,"length1":152,"length2":8}],"length":5226}
{"ts":1594294688,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"\"1\">"],[-1,"One"],[1,"{{ test.title }}"],[0,"</op"]],"start1":2227,"start2":2227,"length1":11,"length2":24}],"length":5239}
{"ts":1594294695,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    "],[-1,"                        \n                                        <div class=\"form-check\">\n                                          <input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"defaultCheck1\">\n                                          <label class=\"form-check-label\" for=\"defaultCheck1\">\n                                            \n                                          </label>\n                                        </div>"],[0,"\n   "]],"start1":2438,"start2":2438,"length1":454,"length2":8}],"length":4793}
{"ts":1594294698,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ct>\n"],[-1,"                                    \n                                    \n            \n                                    "],[0,"\n   "]],"start1":2352,"start2":2352,"length1":131,"length2":8}],"length":4670}
{"ts":1594294699,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"select>\n"],[-1,"\n"],[0,"        "]],"start1":2348,"start2":2348,"length1":17,"length2":16}],"length":4669}
{"ts":1594294744,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ue=\""],[-1,"1"],[1,"test"],[0,"\">{{"]],"start1":2224,"start2":2224,"length1":9,"length2":12}],"length":4672}
{"ts":1594294745,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"ue=\"test"],[1,"."],[0,"\">{{ tes"]],"start1":2224,"start2":2224,"length1":16,"length2":17}],"length":4673}
{"ts":1594294767,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"e=\"test."],[1,"id"],[0,"\">{{ tes"]],"start1":2225,"start2":2225,"length1":16,"length2":18}],"length":4675}
{"ts":1594294784,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"iv>\n"],[-1,"                                    \n"],[0,"    "]],"start1":1992,"start2":1992,"length1":45,"length2":8}],"length":4638}
{"ts":1594294788,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"оздать</button>\n"],[1,"                                \n"],[0,"                "]],"start1":2476,"start2":2476,"length1":32,"length2":65}],"length":4671}
{"ts":1594294803,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"        "],[-1,"//"],[1,"\\\\"],[0," выровня"]],"start1":1193,"start2":1193,"length1":18,"length2":18}],"length":4671}
{"ts":1594294831,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"on>\n"],[-1,"                \\\\ выровнять форму добавления опроса"],[0,"\n   "]],"start1":1181,"start2":1181,"length1":60,"length2":8}],"length":4619}
{"ts":1594294843,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," value=\""],[1,"{{"],[0,"test.id\""]],"start1":2131,"start2":2131,"length1":16,"length2":18}],"length":4621}
{"ts":1594294846,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"{test.id"],[1,"}}"],[0,"\">{{ tes"]],"start1":2140,"start2":2140,"length1":16,"length2":18}],"length":4623}
{"ts":1594294848,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"alue=\"{{"],[1," "],[0,"test.id}"]],"start1":2133,"start2":2133,"length1":16,"length2":17}],"length":4624}
{"ts":1594294850,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," test.id"],[1," "],[0,"}}\">{{ t"]],"start1":2141,"start2":2141,"length1":16,"length2":17}],"length":4625}
{"ts":1594294890,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"    <div"],[1," c"],[0,">\n      "]],"start1":1934,"start2":1934,"length1":16,"length2":18}],"length":4627}
{"ts":1594294892,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"  <div c"],[1,"lass"],[0,">\n      "]],"start1":1936,"start2":1936,"length1":16,"length2":20}],"length":4631}
{"ts":1594294893,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"iv class"],[1,"="],[0,">\n      "]],"start1":1940,"start2":1940,"length1":16,"length2":17}],"length":4632}
{"ts":1594294894,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"v class="],[1,"''"],[0,">\n      "]],"start1":1941,"start2":1941,"length1":16,"length2":18}],"length":4634}
{"ts":1594294905,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0," class='"],[1,"md-4"],[0,"'>\n     "]],"start1":1942,"start2":1942,"length1":16,"length2":20}],"length":4638}
{"ts":1594295106,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"class='m"],[-1,"d"],[1,"t"],[0,"-4'>\n   "]],"start1":1943,"start2":1943,"length1":17,"length2":17}],"length":4638}
{"ts":1594295122,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"        <div"],[-1," class='mt-4'"],[0,">\n          "]],"start1":1930,"start2":1930,"length1":37,"length2":24}],"length":4625}
{"ts":1594295127,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"<br>"],[0,"\n               "]],"start1":2334,"start2":2334,"length1":32,"length2":36}],"length":4629}
{"ts":1594295147,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"                "],[1,"Доб"],[0,"\n               "]],"start1":1889,"start2":1889,"length1":32,"length2":35}],"length":4632}
{"ts":1594295153,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"     Доб"],[1,"авить тесты к опросу"],[0,"\n       "]],"start1":1900,"start2":1900,"length1":16,"length2":36}],"length":4652}
{"ts":1594295167,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"        "],[1,"  "],[0,"Добавить"]],"start1":1897,"start2":1897,"length1":16,"length2":18}],"length":4654}
{"ts":1594295174,"restoring":false,"user_id":37673,"patch":[{"diffs":[[0,"        "],[-1,"  "],[0,"Добавить"]],"start1":1897,"start2":1897,"length1":18,"length2":16}],"length":4652}
{"ts":1594295558,"restoring":false,"user_id":37673,"patch":[{"diffs":[[-1,"{% extends \"base.html\" %}\n\n\n\n{% block title %}\n    Опросы\n{% endblock %}\n\n\n\n<body>\n    \n    {% block content %}\n        {% block format_content %}\n            \n\n            \n            <div class=\"container pt-5\">\n                \n                <div class='mt-4'>\n                    <div class=\"row mb-2 polls\">\n                        {% for poll in polls %}\n                            <div class=\"col-md-6\">\n                                <div class=\"shadow p-3 mb-5 bg-white rounded\">\n                                    <div class=\"col p-3 d-flex flex-column position-static\">\n                                        <h3 class=\"mb-0\">{{ poll.title }}</h3>\n                                        <p class=\"mb-auto\">{{ poll.description }}</p>\n                                        <a href=\"{% url 'detail_poll' slug=poll.slug %}\" class=\"stretched-link\"></a>\n                                    </div>\n                                </div>\n                            </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                \n\n                <button type=\"button\" class=\"btn btn-outline-primary\">Добавить опрос</button>\n\n                    <div id=\"show_form\" style=\"display:none\" class='mt-4 ml-2'>\n                        <div class=\"d-inline-flex bd-highlight\">\n                                \n                            <form method=\"POST\" id=\"poll-form\">{% csrf_token %}\n                                <div class=\"form-group\">\n                                    <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Название опроса\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\" id=\"description\" placeholder=\"Описание\"></textarea>\n                                </div>\n                                Добавить тесты к опросу\n                                <div>\n                                    <select class=\"custom-select\" multiple>\n                                        {% for test in tests %}\n                                        <option value=\"{{ test.id }}\">{{ test.title }}</option>\n                                        {% endfor %}\n                                    </select>\n                                </div>\n                                <br>\n                                <button type=\"submit\" class=\"btn btn-primary\">Создать</button>\n                                \n                            </form>\n                                \n                        </div>\n                    </div>\n\n                \n            </div>\n            \n        {% endblock %}\n    {% endblock %}\n\n</body>\n\n{% block scripts %}\n    <script src=\"/static/js/jquery-2.2.4.min.js\"></script>\n    <script src=\"/static/js/bootstrap.min.js\"></script>\n    \n    <script>\n        $(document).on('submit', '#poll-form', function(e) {\n            e.preventDefault();\n            $.ajax({\n                type: 'POST',\n                url: '{% url \"view_poll\" %}',\n                data: {\n                    title: $('#title').val(),\n                    description: $('#description').val(),\n                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),\n                    action: 'add'\n                },\n                success: function(json) {\n                    document.getElementById(\"poll-form\").reset();\n                    $(\".polls\").prepend('<div class=\"col-md-6\">' +\n                        '<div class=\"row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative\">' +\n                        '<div class=\"col p-4 d-flex flex-column position-static\">' +\n                        '<h3 class=\"mb-0\">' + json.title + '</h3>' +\n                        '<p class=\"mb-auto\">' + json.description + '</p>' +\n                        '</div>' +\n                        '</div>' +\n                        '</div>'\n                    )\n                },\n                error: function(xhr, errmsg, err) {\n                    $('#results').html(\"<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: \" + errmsg +\n                        \" <a href='#' class='close'>&times;</a></div>\"); // add the error to the dom\n                    console.log(xhr.status + \": \" + xhr.responseText); // provide a bit more info about the error to the console\n                }\n            });\n        });\n    </script>\n    \n    <script>\n        $(\"button\").click(function() {\n        $(\"#show_form\").toggle(500);\n        });\n    </script>\n    \n{% endblock %}"]],"start1":0,"start2":0,"length1":4652,"length2":0}],"length":0}
{"ts":1594295562,"restoring":false,"user_id":37673,"patch":[{"diffs":[[1,"{% extends \"base.html\" %}\n\n\n\n{% block title %}\n    Опросы\n{% endblock %}\n\n\n\n<body>\n    \n    {% block content %}\n        {% block format_content %}\n            \n\n            \n            <div class=\"container pt-5\">\n                \n                <div class='mt-4'>\n                    <div class=\"row mb-2 polls\">\n                        {% for poll in polls %}\n                            <div class=\"col-md-6\">\n                                <div class=\"shadow p-3 mb-5 bg-white rounded\">\n                                    <div class=\"col p-3 d-flex flex-column position-static\">\n                                        <h3 class=\"mb-0\">{{ poll.title }}</h3>\n                                        <p class=\"mb-auto\">{{ poll.description }}</p>\n                                        <a href=\"{% url 'detail_poll' slug=poll.slug %}\" class=\"stretched-link\"></a>\n                                    </div>\n                                </div>\n                            </div>\n                        {% endfor %}\n                    </div>\n                </div>\n                \n\n                <button type=\"button\" class=\"btn btn-outline-primary\">Добавить опрос</button>\n\n                    <div id=\"show_form\" style=\"display:none\" class='mt-4 ml-2'>\n                        <div class=\"d-inline-flex bd-highlight\">\n                                \n                            <form method=\"POST\" id=\"poll-form\">{% csrf_token %}\n                                <div class=\"form-group\">\n                                    <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Название опроса\">\n                                </div>\n                                <div class=\"form-group\">\n                                    <textarea class=\"form-control\" id=\"description\" placeholder=\"Описание\"></textarea>\n                                </div>\n                                Добавить тесты к опросу\n                                <div>\n                                    <select class=\"custom-select\" multiple>\n                                        {% for test in tests %}\n                                        <option value=\"{{ test.id }}\">{{ test.title }}</option>\n                                        {% endfor %}\n                                    </select>\n                                </div>\n                                <br>\n                                <button type=\"submit\" class=\"btn btn-primary\">Создать</button>\n                                \n                            </form>\n                                \n                        </div>\n                    </div>\n\n                \n            </div>\n            \n        {% endblock %}\n    {% endblock %}\n\n</body>\n\n{% block scripts %}\n    <script src=\"/static/js/jquery-2.2.4.min.js\"></script>\n    <script src=\"/static/js/bootstrap.min.js\"></script>\n    \n    <script>\n        $(document).on('submit', '#poll-form', function(e) {\n            e.preventDefault();\n            $.ajax({\n                type: 'POST',\n                url: '{% url \"view_poll\" %}',\n                data: {\n                    title: $('#title').val(),\n                    description: $('#description').val(),\n                    csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),\n                    action: 'add'\n                },\n                success: function(json) {\n                    document.getElementById(\"poll-form\").reset();\n                    $(\".polls\").prepend('<div class=\"col-md-6\">' +\n                        '<div class=\"row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative\">' +\n                        '<div class=\"col p-4 d-flex flex-column position-static\">' +\n                        '<h3 class=\"mb-0\">' + json.title + '</h3>' +\n                        '<p class=\"mb-auto\">' + json.description + '</p>' +\n                        '</div>' +\n                        '</div>' +\n                        '</div>'\n                    )\n                },\n                error: function(xhr, errmsg, err) {\n                    $('#results').html(\"<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: \" + errmsg +\n                        \" <a href='#' class='close'>&times;</a></div>\"); // add the error to the dom\n                    console.log(xhr.status + \": \" + xhr.responseText); // provide a bit more info about the error to the console\n                }\n            });\n        });\n    </script>\n    \n    <script>\n        $(\"button\").click(function() {\n        $(\"#show_form\").toggle(500);\n        });\n    </script>\n    \n{% endblock %}"]],"start1":0,"start2":0,"length1":0,"length2":4652}],"length":4652}